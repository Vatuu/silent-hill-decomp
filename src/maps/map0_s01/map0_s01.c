#include "bodyprog/bodyprog.h"
#include "bodyprog/math.h"
#include "main/rng.h"
#include "maps/shared.h"
#include "maps/map0/map0_s01.h"

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800CCB8C);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800CD1F8);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800CE000);

#include "maps/shared/sharedFunc_800CBBBC_0_s00.h" // 0x800CE4C4

#include "maps/shared/sharedFunc_800CE59C_0_s01.h" // 0x800CE59C

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800CE8A8);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800CEE2C);

#include "maps/shared/sharedFunc_800CF2A4_0_s01.h" // 0x800CF2A4

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800CF3F4);

#include "maps/shared/sharedFunc_800CFFF8_0_s00.h" // 0x800CF7BC

void func_800CF8E8() {}

#include "maps/shared/sharedFunc_800D01BC_0_s00.h" // 0x800CF8F0

#include "maps/shared/sharedFunc_800CF9A8_0_s01.h" // 0x800CF9A8

#include "maps/shared/sharedFunc_800D0700_0_s00.h" // 0x800CFA30

#include "maps/shared/sharedFunc_800D08B8_0_s00.h" // 0x800CFBE8

#include "maps/shared/sharedFunc_800D0A60_0_s00.h" // 0x800CFD68

#include "maps/shared/sharedFunc_800D0B18_0_s00.h" // 0x800CFE20

#include "maps/shared/sharedFunc_800D0E04_0_s00.h" // 0x800CFFB8

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800CFFD8);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D0850);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D0C3C);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D16C4);

#include "maps/shared/sharedFunc_800D209C_0_s00.h" // 0x800D1B00

#include "maps/shared/sharedFunc_800D20D8_0_s00.h" // 0x800D1B3C

#include "maps/shared/sharedFunc_800D20E4_0_s00.h" // 0x800D1B48

#include "maps/shared/sharedFunc_800D2244_0_s00.h" // 0x800D1CA8

s32 func_800D1E5C()
{
    return 0;
}

#include "maps/shared/sharedFunc_800D2C7C_0_s00.h" // 0x800D1E64

#include "maps/shared/sharedFunc_800D2D2C_0_s00.h" // 0x800D1F14

#include "maps/shared/sharedFunc_800D2D44_0_s00.h" // 0x800D1F2C

#include "maps/shared/sharedFunc_800D2D6C_0_s00.h" // 0x800D1F54

#include "maps/shared/sharedFunc_800D2D84_0_s00.h" // 0x800D1F6C

#include "maps/shared/sharedFunc_800D2DAC_0_s00.h" // 0x800D1F94

#include "maps/shared/sharedFunc_800D2E50_0_s00.h" // 0x800D2038

#include "maps/shared/sharedFunc_800D2E60_0_s00.h" // 0x800D2048

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D2054);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D2094);

void func_800D20E4() {}

void func_800D20EC() {}

void func_800D20F4() {}

s32 func_800D20FC()
{
    return 0;
}

void func_800D2104() {}

#include "maps/shared/sharedFunc_800D2EA4_0_s00.h" // 0x800D210C

#include "maps/shared/sharedFunc_800D2EB4_0_s00.h" // 0x800D211C

#include "maps/shared/sharedFunc_800D2EF4_0_s00.h" // 0x800D215C

#include "maps/shared/Ai_AirScreamer_Update.h" // 0x800D2170

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D21E4_0_s01); // 0x800D21E4

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D2200_0_s01); // 0x800D2200

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D2274_0_s01); // 0x800D2274

void func_800D2364(s32 arg0) // 0x800D2364
{
    func_8005DC1C(Sfx_Unk1590, arg0 + 24, 128, 0);
}

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D2390_0_s01); // 0x800D2390

#include "maps/shared/Ai_AirScreamer_Init.h" // 0x800D2974

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D2B00_0_s01); // 0x800D2B00

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D2B10_0_s01); // 0x800D2B10

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D2B28_0_s01); // 0x800D2B28

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D2B4C_0_s01); // 0x800D2B4C

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D2BB0_0_s01); // 0x800D2BB0

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D2BE4_0_s01); // 0x800D2BE4

#include "maps/shared/sharedFunc_800D2BF4_0_s01.h" // 0x800D2BF4

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D2C0C);

#include "maps/shared/sharedFunc_800D2E04_0_s01.h" // 0x800D2E04

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D2FB4);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D31D0_0_s01); // 0x800D31D0

#include "maps/shared/sharedFunc_800D3430_0_s01.h" // 0x800D3430

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D3508_0_s01); // 0x800D3508

#include "maps/shared/sharedFunc_800D3630_0_s01.h" // 0x800D3630

#include "maps/shared/sharedFunc_800D3758_0_s01.h" // 0x800D3758

#include "maps/shared/sharedFunc_800D3814_0_s01.h" // 0x800D3814

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D3928_0_s01); // 0x800D3928

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D39F4);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D3A3C);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D3AC0);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedSymbol_800D3B0C_0_s01); // 0x800D3B0C

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D3CC4);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D3DFC);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D3EB8);

void func_800D4114() {}

void func_800D411C() {}

void func_800D4124() {}

void func_800D412C() {}

void func_800D4134() {}

void func_800D413C() {}

void func_800D4144() {}

void func_800D414C() {}

void func_800D4154() {}

void func_800D415C() {}

void func_800D4164() {}

void func_800D416C() {}

void func_800D4174() {}

void func_800D417C() {}

void func_800D4184() {}

void func_800D418C() {}

void func_800D4194() {}

void func_800D419C() {}

void func_800D41A4() {}

void func_800D41AC() {}

void func_800D41B4() {}

void func_800D41BC() {}

void func_800D41C4() {}

void func_800D41CC() {}

void func_800D41D4() {}

void func_800D41DC() {}

void func_800D41E4() {}

void func_800D41EC() {}

void func_800D41F4() {}

void func_800D41FC() {}

void func_800D4204() {}

void func_800D420C() {}

void func_800D4214() {}

void func_800D421C() {}

void func_800D4224() {}

void func_800D422C() {}

void func_800D4234() {}

void func_800D423C() {}

void func_800D4244() {}

void func_800D424C() {}

void func_800D4254() {}

void func_800D425C() {}

void func_800D4264() {}

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D426C);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D4420);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D45BC);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D46C4);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D4894);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D49B0);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D4A80_0_s01);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D4AEC);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D4E84);

#include "maps/shared/sharedFunc_800D5274_0_s01.h" // 0x800D5274

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D529C);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D53AC);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D5638);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D569C);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D57C8);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D598C);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D5B10);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D5C90);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D5D80);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D5E14);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D5E78);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D5F00);

#include "maps/shared/sharedFunc_800D62D8_0_s01.h" // 0x800D62D8

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D633C_0_s01); // 0x800D633C

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D63A4_0_s01); // 0x800D63A4

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D6600_0_s01); // 0x800D6600

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D6A60);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D6C7C);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D6EC4);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D7120);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D71F0);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D72E8);

s32 func_800D7440(VECTOR* vec0, VECTOR* vec1, s_SubCharacter* chara) // 0x800D7440
{
    s32     temp_s2;
    s32     posY;
    s32     result;
    s32     cond;
    VECTOR* vecCpy;

    vecCpy = vec0;

    func_800D81D0(chara);
    func_800D8714(chara, chara->moveSpeed_38, chara->headingAngle_3C);
    func_800D87FC(chara);

    result = func_80069B24(vecCpy, vec1, chara);

    posY    = chara->position_18.vy;
    temp_s2 = func_80080884(chara->position_18.vx + vecCpy->vx,
                            chara->position_18.vz + vecCpy->vz);

    if (sharedFunc_800D4A80_0_s01(chara) != 4)
    {
        if (vec1->vy > 0 && temp_s2 < (posY - FP_METER(0.5f)))
        {
            vecCpy->vx = 0;
            vecCpy->vz = 0;
        }
    }
    else if (temp_s2 < posY)
    {
        vecCpy->vx = 0;
        vecCpy->vz = 0;
    }

    if ((FP_FROM(vec1->vx, Q4_SHIFT) != FP_FROM(vecCpy->vx, Q4_SHIFT)) ||
        (FP_FROM(vec1->vz, Q4_SHIFT) != FP_FROM(vecCpy->vz, Q4_SHIFT)))
    {
        result = 1;
    }

    func_800D8244(chara);
    return result;
}

#include "maps/shared/sharedFunc_800D7560_0_s01.h" // 0x800D7560

void func_800D76A0(s_SubCharacter* chara) // 0x800D76A0
{
    if (chara->model_0.anim_4.animIdx_0 == 47 ||
        chara->model_0.anim_4.animIdx_0 == 27 ||
        chara->model_0.anim_4.animIdx_0 == 29)
    {
        if (func_800D77D0(chara) != 0)
        {
            chara->model_0.anim_4.animIdx_0 = 50;
        }
    }
    else if(chara->model_0.anim_4.animIdx_0 == 51)
    {
        if (func_800D77D0(chara) == 0)
        {
            chara->model_0.anim_4.animIdx_0 = 46;
        }
    }
}

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D7714);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D77D0);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D7AB0_0_s01); // 0x800D7AB0

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D7B14);

void func_800D7E88(s_Model* model) // 0x800D7E88
{
    func_800449AC(model, func_80044918(&model->anim_4));
}

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D7EBC_0_s01); // 0x800D7EBC

#include "maps/shared/sharedFunc_800D81B0_0_s01.h" // 0x800D81B0

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D81D0);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D8244);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D82B8_0_s01); // 0x800D82B8

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D8714);

void func_800D87FC() {}

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D8804);

#include "maps/shared/Ai_Cybil_Update.h" // 0x800D8814

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedFunc_800D8888_0_s01); // 0x800D8888

#include "maps/shared/sharedFunc_800D88D0_0_s01.h" // 0x800D88D0

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", sharedSymbol_800D8A68_0_s01); // 0x800D8A68

#include "maps/shared/Ai_Cybil_Init.h" // 0x800D9AD0

#include "maps/shared/sharedFunc_800D88AC_0_s00.h" // 0x800D9B0C

#include "maps/shared/sharedFunc_800D88C0_0_s00.h" // 0x800D9B20

#include "maps/shared/sharedFunc_800D8904_0_s00.h" // 0x800D9B64

#include "maps/shared/sharedFunc_800D891C_0_s00.h" // 0x800D9B7C

#include "maps/shared/sharedFunc_800D8928_0_s00.h" // 0x800D9B88

#include "maps/shared/sharedFunc_800D893C_0_s00.h" // 0x800D9B9C

#include "maps/shared/sharedFunc_800D8950_0_s00.h" // 0x800D9BB0

#include "maps/shared/sharedFunc_800D8964_0_s00.h" // 0x800D9BC4

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800D9C60);

#include "maps/shared/sharedFunc_800D9064_0_s00.h" // 0x800DA2C4

#include "maps/shared/sharedFunc_800D9078_0_s00.h" // 0x800DA2D8

#include "maps/shared/sharedFunc_800D908C_0_s00.h" // 0x800DA2EC

#include "maps/shared/sharedFunc_800D9188_0_s00.h" // 0x800DA3E8

#include "maps/shared/sharedFunc_800D921C_0_s00.h" // 0x800DA49C

#include "maps/shared/sharedFunc_800D923C_0_s00.h" // 0x800DA4BC

#include "maps/shared/sharedFunc_800D929C_0_s00.h" // 0x800DA51C

#include "maps/shared/sharedFunc_800D92AC_0_s00.h" // 0x800DA52C

void func_800DA778(s32 arg0) // 0x800DA778
{
    (arg0 != 0) ? func_800DA7AC() : func_800DA7FC();
}

void func_800DA7AC() // 0x800DA7AC
{
    s32 var;

    if (!(g_SavegamePtr->eventFlags_168[1] & (1 << 16)))
    {
        if (!(g_SavegamePtr->eventFlags_168[1] & (1 << 17)))
        {
            var = 9;
        }
        else
        {
            var = 30;
        }
    }
    else
    {
        var = 6;
    }

    func_8003640C(var);
}

void func_800DA7FC() // 0x800DA7FC
{
    s32 var0;
    s32 var1;

    var1 = 0x553;
    if (!(g_SavegamePtr->eventFlags_168[4] & (1 << 18)))
    {
        if (!(g_SavegamePtr->eventFlags_168[1] & ((1 << 16) | (1 << 17))))
        {
            var1 = 0xF0000;
            if ((g_SavegamePtr->eventFlags_168[1] & (1 << 7)) && g_GameWork.soundCmd_5B2 == 9)
            {
                var0 = 2;
            }
            else
            {
                var0 = 0x201;
            }
        }
        else if (g_SavegamePtr->eventFlags_168[1] & (1 << 15))
        {
            if (!(g_SavegamePtr->eventFlags_168[1] & (1 << 16)))
            {
                var1 = 0xF0000;
                var0 = 0x100;
            }
            else
            {
                var1 = 0x200;
                var0 = 0x201;
            }
        }
        else
        {
            var0 = 1;
        }
    }
    else
    {
        var0 = 1;
    }

    func_80035F4C(var0, var1, NULL);
}

// `Gfx_LoadingScreen_Debug_Stage`
void func_800DA8A4() // 0x800DA8A4
{
    g_Gfx_ScreenFade = 7;

    Gfx_DebugStringPosition(100, 100);
    Gfx_DebugStringDraw(&D_800CBAD4);
    Gfx_LoadingScreen_BackgroundTexture();
}

#include "maps/shared/sharedFunc_800DA8E8_0_s01.h" // 0x800DA8E8

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800DA980);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800DB790);

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800DBAA0);

void Event_PocketRadioItemTake() // 0x800DC34C
{
    Event_ItemTake(InventoryItemId_PocketRadio, 1, 37, 64);
    g_SavegamePtr->flags_AC |= 1 << 0;
}

void Event_FlashlightItemTake() // 0x800DC394
{
    Event_ItemTake(InventoryItemId_Flashlight, 1, 36, 61);
    Game_TurnFlashlightOff();
}

// TODO: .rodata migration.
#ifdef NON_MATCHING
void Event_MapItemTake() // 0x800DC3C8
{
    switch (g_SysWork.sysStateStep_C)
    {
        case 0:
            sharedFunc_800D20E4_0_s00();
            Fs_QueueStartSeek(FILE_TIM_MP_0TOWN_TIM + D_800A99B5);

            g_SysWork.field_28 = 0;
            g_SysWork.field_10 = 0;
            g_SysWork.timer_2C = 0;
            g_SysWork.field_14 = 0;
            g_SysWork.sysStateStep_C++;

        case 1:
            func_8008616C(2, true, 0, 0, false);
            break;

        case 2:
            DrawSync(0);
            StoreImage(&D_800CCAC8, IMAGE_BUFFER);
            DrawSync(0);
            Fs_QueueStartReadTim(FILE_TIM_MP_0TOWN_TIM + D_800A99B5, FS_BUFFER_2, &g_MapImg);
            Gfx_Init(SCREEN_WIDTH, 1);

            g_IntervalVBlanks = 1;

            GsSwapDispBuff();
            func_8008616C(0, false, 0, 0, false);
            Fs_QueueWaitForEmpty();

            g_SysWork.field_28 = 0;
            g_SysWork.field_10 = 0;
            g_SysWork.timer_2C = 0;
            g_SysWork.field_14 = 0;
            g_SysWork.sysStateStep_C++;

        case 3:
            g_BackgroundColor = 88;

            Gfx_BackgroundSpriteDraw(&g_MapImg);
            func_800860B0(true, 59, 6, 4, 0, false);
            break;

        case 5:
            LoadImage(&D_800CCAC8, IMAGE_BUFFER);
            DrawSync(0);
            Gfx_Init(SCREEN_WIDTH, 0);
            func_8008616C(0, false, 0, 0, false);

            g_SysWork.sysStateStep_C = NO_VALUE;
            g_SysWork.field_28       = 0;
            g_SysWork.field_10       = 0;
            g_SysWork.timer_2C       = 0;
            g_SysWork.field_14       = 0;
            break;

        case 6:
            g_SavegamePtr->hasMapsFlags_164 |= 1 << 1;

            Fs_QueueStartRead(FILE_ANIM_CAFE2_DMS, FS_BUFFER_11);

            g_SysWork.field_28 = 0;
            g_SysWork.field_10 = 0;
            g_SysWork.timer_2C = 0;
            g_SysWork.field_14 = 0;
            g_SysWork.sysStateStep_C++;

        case 4:
        case 7:
            g_BackgroundColor = 88;

            Gfx_BackgroundSpriteDraw(&g_MapImg);
            func_8008616C(2, true, 0, 0, false);
            break;

        case 8:
            LoadImage(&D_800CCAC8, IMAGE_BUFFER);
            DrawSync(0);
            Gfx_Init(SCREEN_WIDTH, 0);
            func_8008616C(0, false, 0, 0, false);

            g_SysWork.field_28 = 0;
            g_SysWork.field_10 = 0;
            g_SysWork.timer_2C = 0;
            g_SysWork.field_14 = 0;
            g_SysWork.sysStateStep_C++;

        case 9:
            func_80088D0C();

            g_SysWork.field_28 = 0;
            g_SysWork.field_10 = 0;
            g_SysWork.timer_2C = 0;
            g_SysWork.field_14 = 0;
            g_SysWork.sysStateStep_C++;

        case 10:
            // Set cutscene character?
            Chara_Spawn(Chara_AirScreamer, 0, 0, 0, 0, 12);
            DmsHeader_FixOffsets(FS_BUFFER_11);
            Dms_CharacterGetPosRot(&g_SysWork.npcs_1A0[0].position_18, &g_SysWork.npcs_1A0[0].rotation_24, &D_800CCA64, 0, FS_BUFFER_11);

            // Set camera.
            vcChangeProjectionValue(Dms_CameraGetTargetPos(&D_800E2380, &D_800E2390, NULL, 0, FS_BUFFER_11));
            vcUserCamTarget(&D_800E2380, NULL, true);
            vcUserWatchTarget(&D_800E2390, NULL, true);

            // Warp player.
            g_SysWork.player_4C.chara_0.position_18.vx = 18784;
            g_SysWork.player_4C.chara_0.position_18.vz = 1094800;
            g_SysWork.player_4C.chara_0.rotation_24.vy = FP_ANGLE(90.0f);

            // Set flags.
            g_SysWork.field_2290             |= 1 << 0;
            g_SysWork.field_228C             |= 1 << 0;
            g_SavegamePtr->eventFlags_168[1] |= 1 << 6;

            // Set ???
            g_SysWork.field_28 = 0;
            g_SysWork.field_10 = 0;
            g_SysWork.timer_2C = 0;
            g_SysWork.field_14 = 0;
            g_SysWork.sysStateStep_C++;

        case 11:
            func_8008616C(1, false, 0, 0, false);
            break;

        default:
            sharedFunc_800D2244_0_s00(0);

            g_SysWork.sysState_8     = 0;
            g_SysWork.timer_24       = 0;
            g_SysWork.sysStateStep_C = 0;
            g_SysWork.field_28       = 0;
            g_SysWork.field_10       = 0;
            g_SysWork.timer_2C       = 0;
            g_SysWork.field_14       = 0;
            break;
    }
}
#else
INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", Event_MapItemTake);
#endif

void Event_KitchenKnifeItemTake() // 0x800DC830
{
    Event_ItemTake(InventoryItemId_KitchenKnife, 1, 35, 60);
}

/** Presumably a pickup function. Maybe debug or something unused and commented out. */
void func_800DC85C() {}

void Event_HealthItemTake() // 0x800DC864
{
    s32 globalPickupId;
    u32 pickupType;

    pickupType     = CommonPickupItemId_FirstAidKit;
    globalPickupId = 0;

    switch (g_MapEventParam->field_5)
    {
        case 13:
            pickupType     = CommonPickupItemId_HealthDrink;
            globalPickupId = 596;
            break;

        case 14:
            pickupType     = CommonPickupItemId_HealthDrink;
            globalPickupId = 597;
            break;
    }

    Event_CommonItemTake(pickupType, globalPickupId);
}

void Event_HandgunItemTake() // 0x800DC8C8
{
    switch (g_SysWork.sysStateStep_C)
    {
        case 0:
            sharedFunc_800D20E4_0_s00();
            func_8004690C(Sfx_Unk1321);
            func_8004690C(Sfx_Unk1322);

            g_SavegamePtr->eventFlags_168[1] &= ~(1 << 20);
            D_800E23A0                        = 0;
            SysWork_StateStepIncrement();

        case 1:
            func_800869E4(68, &D_800E23A0, &D_800DE128);
            break;

        default:
            sharedFunc_800D2244_0_s00(0);
            SysWork_StateSetNext(SysState_Gameplay);

            g_SavegamePtr->eventFlags_168[1] |= 1 << 19;
            break;
    }
}

void func_800DC9C8() // 0x800DC9C8
{
    D_800E23A1         = 0xE0;
    D_800E2490.field_0 = 0;
    D_800E2490.field_4 = 0;
    D_800E2490.field_8 = 0x118000;

    func_8003C8F8(&D_800E23B0[0], &D_800CCB00);
    func_8003C8F8(&D_800E23D0[0], &D_800CCB0C);
    func_8003C8F8(&D_800E23F0[0], &D_800CCB18);
    func_8003C8F8(&D_800E23F0[1], &D_800CCB24);
    func_8003C8F8(&D_800E23F0[2], &D_800CCB30);
    func_8003C8F8(&D_800E2450[0], &D_800CCB3C);
    func_8003C8F8(&D_800E2450[1], &D_800CCB48);

    D_800E24BC.field_0  = 0x5170;
    D_800E24BC.field_4  = -0x1028;
    D_800E24BC.field_8  = 0x1121EB;
    D_800E24BC.field_C  = 0x016C0000;
    D_800E24BC.field_10 = 0;
    func_8003C8F8(&D_800E24BC - 1, &D_800CCB54);

    D_800E24EC.field_0  = 0x52E1;
    D_800E24EC.field_4  = -0x1000;
    D_800E24EC.field_8  = 0x10B47A;
    D_800E24EC.field_C  = 0x04EEFFDE;
    D_800E24EC.field_10 = 0;
    func_8003C8F8(&D_800E24EC - 1, &D_800CCB60);

    D_800E251C.field_0  = 0x53D7;
    D_800E251C.field_4  = -0x1000;
    D_800E251C.field_8  = 0x10B35C;
    D_800E251C.field_C  = 0x02880000;
    D_800E251C.field_10 = 0;
    func_8003C8F8(&D_800E251C - 1, &D_800CCB6C);

    D_800E254C.field_0  = 0x24F5;
    D_800E254C.field_4  = -0x999;
    D_800E254C.field_8  = 0x111F33;
    D_800E254C.field_C  = 0x06880000;
    D_800E254C.field_10 = 0;
    func_8003C8F8(&D_800E254C - 1, &D_800CCB78);

    if ((g_SavegamePtr->eventFlags_168[1] & ((1 << 8) | (1 << 15))) == (1 << 8))
    {
        g_SysWork.flags_22A4 |= (1 << 5) | (1 << 9);

        Chara_Load(0, Chara_AirScreamer, &g_SysWork.npcCoords_FC0, NO_VALUE, 0, 0);

        if (g_SavegamePtr->eventFlags_168[1] & (1 << 6))
        {
            func_80088D0C();
            Chara_Spawn(Chara_AirScreamer, 0, 0xFFFF6000, 0x118000, 0, 12);
            func_800D3A3C(&g_SysWork.npcs_1A0[0]);

            Fs_QueueStartRead(FILE_ANIM_CAFE2_DMS, FS_BUFFER_11);
            Fs_QueueWaitForEmpty();
            DmsHeader_FixOffsets((s_DmsHeader*)FS_BUFFER_11);
        }
    }

    if ((g_SavegamePtr->eventFlags_168[4] & ((1 << 6) | (1 << 31))) == (1 << 31))
    {
        func_8003ED74(6, 3);
    }

    D_800E239C = 0;
    D_800E2560 = 0;

    // There are 6 NPCs max. Maybe related?
    func_8003C8F8(&D_800E2570[0], D_800A99E4.field_8);
    func_8003C8F8(&D_800E2570[1], D_800A99E4.field_C);
    func_8003C8F8(&D_800E2570[2], D_800A99E4.field_10);
    func_8003C8F8(&D_800E2570[3], D_800A99E4.field_14);
    func_8003C8F8(&D_800E2570[4], D_800A99E4.field_18);
    func_8003C8F8(&D_800E2570[5], D_800A99E4.field_1C);
}

INCLUDE_ASM("asm/maps/map0_s01/nonmatchings/map0_s01", func_800DCCF4);

void func_800DD2EC(s32 arg0) // 0x800DD2EC
{
    s32 i;

    if (arg0 == 0)
    {
        for (i = 0; i <= 0; i++)
        {
            func_8003C92C(&D_800E23D0[i], &D_800E2490, &D_800CCB84);
        }

        for (i = 0; i <= 0; i++)
        {
            func_8003C92C(&D_800E23B0[i], &D_800E2490, &D_800CCB84);
        }

        return;
    }

    if (arg0 == 1)
    {
        for (i = 0; i < 2; i++)
        {
            func_8003C92C(&D_800E2450[i], &D_800E2490, &D_800CCB84);
        }

        return;
    }

    for (i = 0; i <= 0; i++)
    {
        func_8003C92C(&D_800E23D0[i], &D_800E2490, &D_800CCB84);
    }

    for (i = 0; i < 3; i++)
    {
        func_8003C92C(&D_800E23F0[i], &D_800E2490, &D_800CCB84);
    }
}
