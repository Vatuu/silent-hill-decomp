#include "bodyprog/bodyprog.h"
#include "bodyprog/math/math.h"
#include "main/rng.h"
#include "maps/shared.h"
#include "maps/map1/map1_s01.h"

INCLUDE_RODATA("asm/maps/map1_s01/nonmatchings/map1_s01", D_800C9578);

INCLUDE_RODATA("asm/maps/map1_s01/nonmatchings/map1_s01", g_MapOverlayHeader);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800CB7F4);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800CB8A0);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800CBA38);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800CBB30);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800CC3C0);

#include "maps/shared/sharedFunc_800D08B8_0_s00.h" // 0x800CC528

#include "maps/shared/sharedFunc_800D0A60_0_s00.h" // 0x800CC6A8

#include "maps/shared/sharedFunc_800D0B18_0_s00.h" // 0x800CC760

#include "maps/shared/sharedFunc_800D0E04_0_s00.h" // 0x800CC8C4

#include "maps/shared/sharedFunc_800CFFD8_0_s01.h" // 0x800CC8E4

#include "maps/shared/sharedFunc_800D0850_0_s01.h" // 0x800CD15C

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800CD548);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800CDBE4);

#include "maps/shared/sharedFunc_800D209C_0_s00.h" // 0x800CE034

#include "maps/shared/sharedFunc_800D20D8_0_s00.h" // 0x800CE070

#include "maps/shared/sharedFunc_800D20E4_0_s00.h" // 0x800CE07C

#include "maps/shared/sharedFunc_800D2244_0_s00.h" // 0x800CE1DC

s32 func_800CE3B4()
{
    return 0;
}

#include "maps/shared/sharedFunc_800D2C7C_0_s00.h" // 0x800CE3BC

#include "maps/shared/sharedFunc_800D2D2C_0_s00.h" // 0x800CE46C

#include "maps/shared/sharedFunc_800D2D44_0_s00.h" // 0x800CE484

#include "maps/shared/sharedFunc_800D2D6C_0_s00.h" // 0x800CE4AC

#include "maps/shared/sharedFunc_800D2D84_0_s00.h" // 0x800CE4C4

#include "maps/shared/sharedFunc_800D2DAC_0_s00.h" // 0x800CE4EC

#include "maps/shared/sharedFunc_800D2E50_0_s00.h" // 0x800CE590

#include "maps/shared/sharedFunc_800D2E60_0_s00.h" // 0x800CE5A0

void func_800CE5AC(void) {}

void func_800CE5B4(void) {}

void func_800CE5BC(void) {}

void func_800CE5C4(void) {}

void func_800CE5CC(void) {}

s32 func_800CE5D4()
{
    return 0;
}

void func_800CE5DC(void) {}

#include "maps/shared/sharedFunc_800D2EA4_0_s00.h" // 0x800CE5E4

#include "maps/shared/sharedFunc_800D2EB4_0_s00.h" // 0x800CE5F4

#include "maps/shared/sharedFunc_800D2EF4_0_s00.h" // 0x800CE634

#include "maps/shared/Ai_LarvalStalker_Update.h" // 0x800CE648

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", sharedFunc_800CF168_1_s00); // 0x800CE760

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", sharedFunc_800D140C_1_s00); // 0x800D0A04

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", sharedFunc_800D1524_1_s00); // 0x800D0B1C

#include "maps/shared/Ai_LarvalStalker_Init.h" // 0x800D0CF4

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", sharedFunc_800D17BC_1_s00); // 0x800D0DB4

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", sharedFunc_800D1DBC_1_s00); // 0x800D13B4

#include "maps/shared/Ai_Stalker_Update.h" // 0x800D1AF0

#include "maps/shared/Ai_Stalker_Init.h" // 0x800D1C84

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", sharedFunc_800D3308_0_s00); // 0x800D1EF0

#include "maps/shared/sharedFunc_800D3B44_0_s00.h" // 0x800D272C

void sharedFunc_800D3EF4_0_s00(s_SubCharacter* chara) {} // 0x800D2ADC

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", sharedFunc_800D4924_0_s00); // 0x800D2AE4

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", sharedFunc_800D492C_0_s00); // 0x800D36B4

#include "maps/shared/sharedFunc_800D5098_0_s00.h" // 0x800D3E20

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", sharedFunc_800D54A8_0_s00); // 0x800D4230

#include "maps/shared/sharedFunc_800D5B48_0_s00.h" // 0x800D48D0

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", sharedFunc_800D5C64_0_s00); // 0x800D49EC

#include "maps/shared/sharedFunc_800D5FCC_0_s00.h" // 0x800D4D54

#include "maps/shared/sharedFunc_800D63D0_0_s00.h" // 0x800D5158

#include "maps/shared/sharedFunc_800D654C_0_s00.h" // 0x800D52D4

#include "maps/shared/sharedFunc_800D6554_0_s00.h" // 0x800D52DC

#include "maps/shared/sharedFunc_800D670C_0_s00.h" // 0x800D5494

#include "maps/shared/sharedFunc_800D67FC_0_s00.h" // 0x800D5584

INCLUDE_RODATA("asm/maps/map1_s01/nonmatchings/map1_s01", sharedData_800CAB70_0_s00);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", sharedFunc_800D6970_0_s00); // 0x800D56F8

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", sharedFunc_800D70C4_0_s00); // 0x800D5E4C

#include "maps/shared/sharedFunc_800D7BE8_0_s00.h" // 0x800D6970

#include "maps/shared/sharedFunc_800D7E04_0_s00.h" // 0x800D6B8C

void Ai_Cat_Update(s_SubCharacter* chara, s_AnmHeader* anmHdr, GsCOORDINATE2* coords) // 0x800D6D40
{
    s_AnimInfo* animInfo;
    bool        cond;

    if (chara->model_0.state_2 == 0)
    {
        chara->model_0.state_2                                      = 1;
        chara->model_0.anim_4.status_0                              = ANIM_STATUS(3, true);
        chara->model_0.anim_4.time_4                                = Q12(7.0f);
        chara->model_0.anim_4.alpha_A                               = Q12(0.0f);
        chara->model_0.stateStep_3                                  = 0;
        chara->model_0.anim_4.keyframeIdx_8                         = 7;
        chara->position_18.vy                                       = 0;
        chara->properties_E4.larvalStalker.properties_E8[0].val8[0] = 0;
    }

    if (chara->model_0.stateStep_3 == 0)
    {
        if (chara->model_0.state_2 == 2)
        {
            chara->model_0.anim_4.status_0      = ANIM_STATUS(1, true);
            chara->model_0.anim_4.time_4         = Q12(7.0f);
            chara->model_0.anim_4.keyframeIdx_8 = 7;
        }
        else if (chara->model_0.state_2 == 3)
        {
            chara->model_0.anim_4.status_0      = ANIM_STATUS(2, true);
            chara->model_0.anim_4.time_4         = Q12(23.0f);
            chara->model_0.anim_4.keyframeIdx_8 = 23;
        }

        chara->model_0.stateStep_3++;
    }

    Math_MatrixTransform(&chara->position_18, &chara->rotation_24, coords);

    animInfo = &CAT_ANIM_INFOS[chara->model_0.anim_4.status_0];
    animInfo->updateFunc_0(&chara->model_0, anmHdr, coords, animInfo);

    cond = false;
    if (chara->model_0.anim_4.status_0 == ANIM_STATUS(1, true))
    {
        if (((u8)chara->properties_E4.larvalStalker.properties_E8[0].val8[0] == 0 &&
             (FP_FROM(chara->model_0.anim_4.time_4, Q12_SHIFT) - 20) < 3u) ||
            ((u8)chara->properties_E4.larvalStalker.properties_E8[0].val8[0] != 0 &&
             (FP_FROM(chara->model_0.anim_4.time_4, Q12_SHIFT) - 25) < 3u))
        {
            cond = true;
        }
    }
    else
    {
        if (((u8)chara->properties_E4.larvalStalker.properties_E8[0].val8[0] == 0 &&
             (FP_FROM(chara->model_0.anim_4.time_4, Q12_SHIFT) - 29) < 3u) ||
            ((u8)chara->properties_E4.larvalStalker.properties_E8[0].val8[0] != 0 &&
             (FP_FROM(chara->model_0.anim_4.time_4, Q12_SHIFT) - 36) < 3u))
        {
            cond = true;
        }
    }

    if (cond)
    {
        func_8005DD44(1447, &chara->position_18, Q8_CLAMPED(0.5f), Rng_GenerateInt(Rng_Rand16(), -7, 8u));
        chara->properties_E4.larvalStalker.properties_E8[0].val8[0] ^= 1;
    }
}

#include "maps/shared/sharedFunc_800D929C_0_s00.h" // 0x800D6F34

#include "maps/shared/sharedFunc_800D7758_1_s00.h" // 0x800D6F44

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D6FE4);

void func_800D7050(void) {
}

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D7058);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D70EC);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D7180);

const char* MAP_MESSAGES[] =
{
    #include "maps/shared/mapMsg_common.h"
    "\tStatue_of_an_old_man's_hand.",
    "\tThe_fist_shut_tight, ~N\n\tas_if_never_to_let_go. ~E ",
    "\tThere_is_a_ ~C2 Gold_medallion ~C7 . ~N\n\tTake_it? ~S4 ",
    "\tThere_is_a_ ~C2 Chemical ~C7 . ~N\n\tTake_it? ~S4 ",
    "\tNothing_unusual.~E ",
    "\tJust_the_melted_remains_of ~N\n\ta_statue_of_a_hand. ",
    "\tNothing_to_worry_about. ~E ",
    "\t",
    "~L4 ~M ~C3 [A_Tale_of_Birds_Without_a_Voice] ~N\n\t~N\n\tFirst_flew_the_greedy_Pelican, ~N\n\tEager_for_the_reward, ~N\n\tWhite_wings_flailing. ~N\n\t~N\n\tThen_came_a_silent_Dove, ~N\n\tFlying_beyond_the_Pelican, ~N\n\tAs_far_as_he_could. ",
    "~L4 ~M ~C3 A_Raven_flies_in, ~N\n\tFlying_higher_than_the_Dove, ~N\n\tJust_to_show_that_he_can. ~N\n\t~N\n\tA_Swan_glides_in, ~N\n\tTo_find_a_peaceful_spot, ~N\n\tNext_to_another_bird. ",
    "~L4 ~M ~C3 Finally_out_comes_a_Crow, ~N\n\tComing_quickly_to_a_stop, ~N\n\tYawning_and_then_napping. ~N\n\t~N\n\tWho_will_show_the_way, ~N\n\tWho_will_be_the_key, ~N\n\tWho_will_lead_to ~N\n\tThe_silver_reward. ~E ",
    "\tIt_won't_open._Odd, ~N\n\tdoesn't_look_locked,_though. ~E ",
    "\tThere's_some_blood ~N\n\ton_some_of_the_keys..... ",
    "\tDoes_this_mean_anything? ~E ",
    "\tCheck_the_piano? ~S4 ",
    "\tThere_is_a_ ~C2 Silver_medallion ~C7 . ~N\n\tTake_it? ~S4 ",
    "\tIt's_written_in_blood. ~E ",
    "\tNothing_inside. ~E ",
    "~J0(2.0)\tJust_a_cat... ~E ",
    "\tDistilled_water. ~N\n\tNo_reason_to_take_it. ~E ",
    "\tNothing_useful_on_the_shelf. ~E ",
    "\tNothing_useful ~N\n\tin_the_desk_drawer. ~E ",
    "\tNothing_helpful. ~E ",
    "\tGlucose. ~N\n\tNo_reason_to_take_it. ~E ",
    "\t~C3 Warning._Don't_forget_to ~N\n\ttake_all_of_your_possessions ~N\n\t_after_using_the_lockers. ",
    "\tNormal_elementary_school ~N\n\tbulletin_board. ~N\n\tNothing_in_particular_here. ~E ",
    "\t~C3 ~M NO ~N\n\tRUNNING_OR_PLAYING ~N\n\tIN_THE_LOCKER_ROOM ~E ",
    "\tNothing_useful_in_the_locker. ~E ",
    "\tNothing_useful ~N\n\tin_the_desk_drawer. ~E ",
    "\tNo_useful_books. ~E ",
    "\tNo_special_book_here. ~E ",
    "\tNo_need_to_read ~N\n\tany_of_these_books. ~E ",
    "\tThere's_some_blood ~N\n\ton_some_of_the_keys..... ~E "
};

void func_800D7214(void) // 0x800D7214
{
    u32 pickupType;
    s32 eventFlagIdx;

    pickupType   = CommonPickupItemId_FirstAidKit;
    eventFlagIdx = 0;

    switch (g_MapEventParam->field_5)
    {
        case 96:
            pickupType   = CommonPickupItemId_HandgunBullets;
            eventFlagIdx = EventFlag_M1S01_HandgunBullets0;
            break;

        case 97:
            pickupType   = CommonPickupItemId_FirstAidKit;
            eventFlagIdx = EventFlag_M1S01_FirstAidKit;
            break;

        case 98:
            pickupType   = CommonPickupItemId_HealthDrink;
            eventFlagIdx = EventFlag_M1S01_HealthDrink;
            break;

        case 99:
            pickupType   = CommonPickupItemId_HandgunBullets;
            eventFlagIdx = EventFlag_M1S01_HandgunBullets1;
            break;

        case 100:
            pickupType   = CommonPickupItemId_HandgunBullets;
            eventFlagIdx = EventFlag_M1S01_HandgunBullets2;
            break;
    }

    Event_CommonItemTake(pickupType, eventFlagIdx);
}

void func_800D72B0(void) // 0x800D72B0
{
    func_80087360(FILE_TIM_HAND_TIM, Q12(2.0f), Q12(1.5f), 15);
}

void func_800D72DC(void) // 0x800D72DC
{
    Event_ItemTake(InventoryItemId_Chemical, DEFAULT_PICKUP_ITEM_COUNT, EventFlag_M1S01_PickupChemical, 18);
}

INCLUDE_RODATA("asm/maps/map1_s01/nonmatchings/map1_s01", D_800CB5A4);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D7308);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D76F4);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D7830);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D7864);

void func_800D7EEC(void) // 0x800D7EEC
{
    func_80087360(FILE_TIM_PIANO1_TIM, Q12(0.0f), Q12(0.0f), 47);
}

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D7F18);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D857C);

void func_800D8794(void) // 0x800D8794
{
    func_80087360(FILE_TIM_LOCKER0_TIM, Q12(0.0f), Q12(0.0f), 32);
}

INCLUDE_RODATA("asm/maps/map1_s01/nonmatchings/map1_s01", D_800CB6CC);

INCLUDE_RODATA("asm/maps/map1_s01/nonmatchings/map1_s01", D_800CB6D8);

INCLUDE_RODATA("asm/maps/map1_s01/nonmatchings/map1_s01", D_800CB6E4);

INCLUDE_RODATA("asm/maps/map1_s01/nonmatchings/map1_s01", D_800CB6F0);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D87C0);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D91EC);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D9514);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D9DDC);

INCLUDE_ASM("asm/maps/map1_s01/nonmatchings/map1_s01", func_800D9EC4);

INCLUDE_RODATA("asm/maps/map1_s01/nonmatchings/map1_s01", D_800CB7D4);

INCLUDE_RODATA("asm/maps/map1_s01/nonmatchings/map1_s01", D_800CB7DC);

INCLUDE_RODATA("asm/maps/map1_s01/nonmatchings/map1_s01", D_800CB7E8);
